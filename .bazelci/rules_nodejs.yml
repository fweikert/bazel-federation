---
bazel: 0.26.0
platforms:
  ubuntu1604:
    run_targets:
    - "@nodejs//:yarn"
    - "@rules_nodejs//internal/node/test:no_deps"
    - "@rules_nodejs//internal/node/test:has_deps_legacy"
    - "@rules_nodejs//internal/node/test:has_deps"
    - "@rules_nodejs//internal/node/test:has_deps_hybrid"
    - "@rules_nodejs//internal/e2e/fine_grained_no_bin:index"
    - "@fine_grained_deps_yarn//typescript/bin:tsc"
    - "@bazel_workspace_a//:bin"
    - "@bazel_workspace_a//subdir:bin"
    - "@bazel_workspace_b//:bin"
    - "@bazel_workspace_b//subdir:bin"
    build_targets:
    - "@rules_nodejs//..."
    test_targets:
    - "@rules_nodejs//..."
  ubuntu1804:
    run_targets:
    - "@nodejs//:yarn"
    - "@rules_nodejs//internal/node/test:no_deps"
    - "@rules_nodejs//internal/node/test:has_deps_legacy"
    - "@rules_nodejs//internal/node/test:has_deps"
    - "@rules_nodejs//internal/node/test:has_deps_hybrid"
    - "@rules_nodejs//internal/e2e/fine_grained_no_bin:index"
    - "@fine_grained_deps_yarn//typescript/bin:tsc"
    - "@bazel_workspace_a//:bin"
    - "@bazel_workspace_a//subdir:bin"
    - "@bazel_workspace_b//:bin"
    - "@bazel_workspace_b//subdir:bin"
    build_targets:
    - "@rules_nodejs//..."
    # This target is tagged "manual" but we want some CI
    # coverage of it to make sure it doesn't break.
    - "@rules_nodejs//docs"
    test_targets:
    - "@rules_nodejs//..."
  macos:
    run_targets:
    - "@nodejs//:yarn"
    - "@rules_nodejs//internal/node/test:no_deps"
    - "@rules_nodejs//internal/node/test:has_deps_legacy"
    - "@rules_nodejs//internal/node/test:has_deps"
    - "@rules_nodejs//internal/node/test:has_deps_hybrid"
    - "@rules_nodejs//internal/e2e/fine_grained_no_bin:index"
    - "@fine_grained_deps_yarn//typescript/bin:tsc"
    - "@bazel_workspace_a//:bin"
    - "@bazel_workspace_a//subdir:bin"
    - "@bazel_workspace_b//:bin"
    - "@bazel_workspace_b//subdir:bin"
    build_targets:
    - "@rules_nodejs//..."
    test_targets:
    - "@rules_nodejs//..."
  windows:
    run_targets:
    - "@nodejs//:yarn"
    - "@rules_nodejs//internal/node/test:no_deps"
    - "@rules_nodejs//internal/node/test:has_deps_legacy"
    - "@rules_nodejs//internal/node/test:has_deps"
    - "@rules_nodejs//internal/node/test:has_deps_hybrid"
    - "@rules_nodejs//internal/e2e/fine_grained_no_bin:index"
    - "@fine_grained_deps_yarn//typescript/bin:tsc"
    - "@bazel_workspace_a//:bin"
    - "@bazel_workspace_a//subdir:bin"
    - "@bazel_workspace_b//:bin"
    - "@bazel_workspace_b//subdir:bin"
    build_targets:
    - "@rules_nodejs//..."
    test_flags:
    - "--test_tag_filters=-fix-windows"
    test_targets:
    - "@rules_nodejs//..."
  rbe_ubuntu1604:
    build_targets:
    - "@rules_nodejs//..."